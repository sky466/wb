<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="6;url=围猫猫.html">
    <title>正在加载应用...</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f0f2f5;
            color: #444;
            transition: background-color 0.5s;
        }
        .loader {
            text-align: center;
        }
        .spinner {
            border: 6px solid #e3e3e3;
            border-top: 6px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1.5s linear infinite;
            margin: 0 auto 20px;
        }
        p {
            font-size: 1.1em;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>

    <div class="loader">
        <div class="spinner"></div>
        <p>正在启动文本工具...</p>
    </div>

    <script>
        (function() {
            // --- 配置 ---
            const mainAppUrl = 'app.html';       // 您的主应用页面
            const fallbackGameUrl = '围猫猫.html'; // 您的备用游戏页面
            const timeoutDuration = 4000;      // 设置4秒超时

            // 创建一个AbortController来控制超时
            const controller = new AbortController();
            const signal = controller.signal;

            // 设置超时，如果在指定时间内fetch没有完成，就中止它
            const timeoutId = setTimeout(() => {
                controller.abort();
            }, timeoutDuration);

            // 使用fetch探测主应用
            fetch(mainAppUrl, { method: 'HEAD', signal: signal }) // 使用HEAD请求，更快速，只获取响应头
                .then(response => {
                    // 清除超时计时器，因为我们已经收到了响应
                    clearTimeout(timeoutId);
                    
                    // 检查响应是否成功 (状态码 200-299)
                    if (response.ok) {
                        // 成功，立即跳转到主应用
                        window.location.replace(mainAppUrl);
                    } else {
                        // 文件存在但服务器返回错误（如404, 500），跳转到备用游戏
                        throw new Error('Server response not OK');
                    }
                })
                .catch(error => {
                    // 清除可能仍在运行的计时器
                    clearTimeout(timeoutId);
                    
                    // 无论是网络错误、超时中止还是服务器错误，都跳转到备用游戏
                    console.error("无法加载主应用，正在跳转到备用页面。错误:", error.message);
                    window.location.replace(fallbackGameUrl);
                });
        })();
    </script>

</body>
</html>
